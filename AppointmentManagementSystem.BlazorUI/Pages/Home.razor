@page "/"
@layout AppointmentManagementSystem.BlazorUI.Shared.LandingLayout
@using AppointmentManagementSystem.Application.DTOs
@using AppointmentManagementSystem.BlazorUI.Services.ApiServices
@using Radzen
@inject ICategoryApiService CategoryApiService
@inject NavigationManager Navigation

<PageTitle>Aptiva Plan - Online Randevu Sistemi</PageTitle>

<!-- Hero Section - Premium -->
<div id="hero" class="hero-section">
    <div class="hero-bg-animation"></div>
    <div class="hero-content">
        <div class="hero-badge">
            <RadzenIcon Icon="verified" Style="font-size: 16px; margin-right: 8px;" />
            <span>Türkiye'nin En Güvenilir Randevu Platformu</span>
        </div>
        <h1 class="hero-title">
            Randevularınızı 
            <span class="gradient-text">Kolayca Yönetin</span>
        </h1>
        <p class="hero-subtitle">
            Modern, hızlı ve kullanıcı dostu randevu yönetim sistemi ile işletmenizi dijitalleştirin. 
            <span class="highlight-text">7/24 online randevu</span> imkanı sunun!
        </p>
        <div class="hero-buttons">
            <button class="btn-primary-hero" @onclick="@(() => Navigation.NavigateTo("/register"))">
                <span>Ücretsiz Başla</span>
                <RadzenIcon Icon="arrow_forward" Style="font-size: 20px; margin-left: 8px;" />
            </button>
            <button class="btn-secondary-hero" @onclick="@(() => Navigation.NavigateTo("/categories"))">
                <RadzenIcon Icon="play_circle" Style="font-size: 20px; margin-right: 8px;" />
                <span>Demo İzle</span>
            </button>
        </div>
        <div class="hero-stats">
            <div class="stat-item">
                <div class="stat-number">10K+</div>
                <div class="stat-label">Aktif İşletme</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <div class="stat-number">50K+</div>
                <div class="stat-label">Mutlu Müşteri</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <div class="stat-number">99.9%</div>
                <div class="stat-label">Uptime</div>
            </div>
        </div>
    </div>
    <div class="hero-decoration">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
    </div>
</div>

<!-- Features Section - Premium -->
<div id="features" class="features-section">
    <div class="section-container">
        <div class="section-header">
            <span class="section-badge">
                <RadzenIcon Icon="bolt" Style="font-size: 14px; margin-right: 6px;" />
                ÖZELLİKLER
            </span>
            <h2 class="section-title">Neden Aptiva Plan?</h2>
            <p class="section-subtitle">İşletmenizi bir üst seviyeye taşıyacak güçlü özellikler</p>
        </div>

        <div class="features-grid">
            <div class="feature-card" @onmouseenter="@((args) => HandleHover(args, 0))" @onmouseleave="@((args) => HandleHover(args, -1))">
                <div class="feature-icon icon-purple">
                    <RadzenIcon Icon="event" Style="font-size: 32px;" />
                    <div class="icon-glow glow-purple"></div>
                </div>
                <h3 class="feature-title">Online Randevu</h3>
                <p class="feature-description">
                    Müşterileriniz 7/24 online randevu alabilir. Telefon trafiğinden kurtulun.
                </p>
                <div class="feature-link">
                    Daha Fazla
                    <RadzenIcon Icon="arrow_forward" Style="font-size: 16px; margin-left: 4px;" />
                </div>
            </div>

            <div class="feature-card" @onmouseenter="@((args) => HandleHover(args, 1))" @onmouseleave="@((args) => HandleHover(args, -1))">
                <div class="feature-icon icon-green">
                    <RadzenIcon Icon="notifications" Style="font-size: 32px;" />
                    <div class="icon-glow glow-green"></div>
                </div>
                <h3 class="feature-title">Otomatik Bildirimler</h3>
                <p class="feature-description">
                    Randevu hatırlatmaları otomatik gönderilir. No-show oranını düşürün.
                </p>
                <div class="feature-link">
                    Daha Fazla
                    <RadzenIcon Icon="arrow_forward" Style="font-size: 16px; margin-left: 4px;" />
                </div>
            </div>

            <div class="feature-card" @onmouseenter="@((args) => HandleHover(args, 2))" @onmouseleave="@((args) => HandleHover(args, -1))">
                <div class="feature-icon icon-orange">
                    <RadzenIcon Icon="analytics" Style="font-size: 32px;" />
                    <div class="icon-glow glow-orange"></div>
                </div>
                <h3 class="feature-title">Detaylı Raporlar</h3>
                <p class="feature-description">
                    İşletmenizin performansını anlık takip edin. Veri odaklı kararlar alın.
                </p>
                <div class="feature-link">
                    Daha Fazla
                    <RadzenIcon Icon="arrow_forward" Style="font-size: 16px; margin-left: 4px;" />
                </div>
            </div>

            <div class="feature-card" @onmouseenter="@((args) => HandleHover(args, 3))" @onmouseleave="@((args) => HandleHover(args, -1))">
                <div class="feature-icon icon-red">
                    <RadzenIcon Icon="star" Style="font-size: 32px;" />
                    <div class="icon-glow glow-red"></div>
                </div>
                <h3 class="feature-title">Müşteri Yorumları</h3>
                <p class="feature-description">
                    Müşteri memnuniyetini ölçün. Yorumlar ve puanlamalarla güven kazanın.
                </p>
                <div class="feature-link">
                    Daha Fazla
                    <RadzenIcon Icon="arrow_forward" Style="font-size: 16px; margin-left: 4px;" />
                </div>
            </div>
        </div>
    </div>
</div>

<!-- How It Works Section - Premium -->
<div id="how-it-works" class="how-it-works-section">
    <div class="section-container">
        <div class="section-header">
            <span class="section-badge badge-light">
                <RadzenIcon Icon="info" Style="font-size: 14px; margin-right: 6px;" />
                NASIL ÇALIŞIR
            </span>
            <h2 class="section-title">3 Adımda Başlayın</h2>
            <p class="section-subtitle">İşletmenizi dijitalleştirmek hiç bu kadar kolay olmamıştı</p>
        </div>

        <div class="steps-container">
            <div class="step-card">
                <div class="step-number-wrapper">
                    <div class="step-number step-purple">
                        <span>01</span>
                        <div class="step-pulse"></div>
                    </div>
                    <div class="step-connector"></div>
                </div>
                <div class="step-icon step-icon-purple">
                    <RadzenIcon Icon="person_add" Style="font-size: 28px;" />
                </div>
                <h3 class="step-title">Kayıt Olun</h3>
                <p class="step-description">
                    İşletmenizi ve hizmetlerinizi sisteme ekleyin. Sadece 5 dakika sürer!
                </p>
                <div class="step-features">
                    <div class="step-feature-item">
                        <RadzenIcon Icon="check_circle" Style="font-size: 16px; color: #10b981; margin-right: 8px;" />
                        <span>Hızlı Kurulum</span>
                    </div>
                    <div class="step-feature-item">
                        <RadzenIcon Icon="check_circle" Style="font-size: 16px; color: #10b981; margin-right: 8px;" />
                        <span>Kolay Entegrasyon</span>
                    </div>
                </div>
            </div>

            <div class="step-card">
                <div class="step-number-wrapper">
                    <div class="step-number step-green">
                        <span>02</span>
                        <div class="step-pulse"></div>
                    </div>
                    <div class="step-connector"></div>
                </div>
                <div class="step-icon step-icon-green">
                    <RadzenIcon Icon="share" Style="font-size: 28px;" />
                </div>
                <h3 class="step-title">Paylaşın</h3>
                <p class="step-description">
                    İşletme profilinizi müşterilerinizle paylaşın. Sosyal medyada duyurun.
                </p>
                <div class="step-features">
                    <div class="step-feature-item">
                        <RadzenIcon Icon="check_circle" Style="font-size: 16px; color: #10b981; margin-right: 8px;" />
                        <span>Özel Link</span>
                    </div>
                    <div class="step-feature-item">
                        <RadzenIcon Icon="check_circle" Style="font-size: 16px; color: #10b981; margin-right: 8px;" />
                        <span>Sosyal Medya</span>
                    </div>
                </div>
            </div>

            <div class="step-card">
                <div class="step-number-wrapper">
                    <div class="step-number step-orange">
                        <span>03</span>
                        <div class="step-pulse"></div>
                    </div>
                </div>
                <div class="step-icon step-icon-orange">
                    <RadzenIcon Icon="settings" Style="font-size: 28px;" />
                </div>
                <h3 class="step-title">Yönetin</h3>
                <p class="step-description">
                    Randevuları yönetin, müşterilerinize harika hizmet verin!
                </p>
                <div class="step-features">
                    <div class="step-feature-item">
                        <RadzenIcon Icon="check_circle" Style="font-size: 16px; color: #10b981; margin-right: 8px;" />
                        <span>Anlık Takip</span>
                    </div>
                    <div class="step-feature-item">
                        <RadzenIcon Icon="check_circle" Style="font-size: 16px; color: #10b981; margin-right: 8px;" />
                        <span>Otomatik Bildirimler</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Categories Section -->
@if (categories.Any())
{
    <div id="categories" style="padding: 80px 24px; background: white;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 60px;">
                <RadzenText TextStyle="TextStyle.DisplayH4" Style="margin: 0; font-weight: 700; color: #1a1a2e; margin-bottom: 16px;">
                    Popüler Kategoriler
                </RadzenText>
                <RadzenText TextStyle="TextStyle.H6" Style="color: var(--rz-text-secondary-color); margin: 0;">
                    Hangi alanda hizmet veriyorsunuz?
                </RadzenText>
            </div>

            <RadzenRow Gap="24px">
                @foreach (var category in categories.Take(6))
                {
                    <RadzenColumn Size="12" SizeMD="6" SizeLG="4">
                        <RadzenCard Style="height: 100%; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s;"
                                   @onclick="@(() => Navigation.NavigateTo($"/businesses/category/{category.Id}"))">
                            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="16px" Style="padding: 16px;">
                                <div style="width: 60px; height: 60px; border-radius: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center;">
                                    <RadzenText Style="color: white; font-size: 28px; margin: 0;">
                                        @category.Name.Substring(0, 1).ToUpper()
                                    </RadzenText>
                                </div>
                                <RadzenStack Orientation="Orientation.Vertical" Gap="4px">
                                    <RadzenText TextStyle="TextStyle.Subtitle1" Style="margin: 0; font-weight: 600;">
                                        @category.Name
                                    </RadzenText>
                                    @if (!string.IsNullOrEmpty(category.Description))
                                    {
                                        <RadzenText TextStyle="TextStyle.Caption" Style="color: var(--rz-text-secondary-color); margin: 0;">
                                            @category.Description
                                        </RadzenText>
                                    }
                                </RadzenStack>
                            </RadzenStack>
                        </RadzenCard>
                    </RadzenColumn>
                }
            </RadzenRow>

            <div style="text-align: center; margin-top: 40px;">
                <RadzenButton Text="Tüm Kategorileri Gör" 
                             ButtonStyle="ButtonStyle.Primary" 
                             Size="ButtonSize.Large"
                             Icon="arrow_forward"
                             Click="@(() => Navigation.NavigateTo("/categories"))" />
            </div>
        </div>
    </div>
}

<!-- CTA Section - Premium -->
<div class="cta-section">
    <div class="cta-bg-pattern"></div>
    <div class="cta-content">
        <div class="cta-badge">
            <RadzenIcon Icon="rocket_launch" Style="font-size: 16px; margin-right: 8px;" />
            <span>HEMEN BAŞLAYIN</span>
        </div>
        <h2 class="cta-title">
            İşletmenizi Geleceğe Taşıyın
        </h2>
        <p class="cta-subtitle">
            İşletmenizi dijitalleştirmek için geç kalmayın. Ücretsiz hesap oluşturun ve 
            <span class="cta-highlight">tüm özellikleri</span> keşfedin.
        </p>
        <button class="cta-button" @onclick="@(() => Navigation.NavigateTo("/register"))">
            <span>Ücretsiz Dene</span>
            <RadzenIcon Icon="arrow_forward" Style="font-size: 20px; margin-left: 8px;" />
            <div class="button-shine"></div>
        </button>
        <div class="cta-features">
            <div class="cta-feature">
                <RadzenIcon Icon="verified" Style="font-size: 20px; color: #10b981;" />
                <span>Kredi kartı gerektirmez</span>
            </div>
            <div class="cta-feature">
                <RadzenIcon Icon="bolt" Style="font-size: 20px; color: #f59e0b;" />
                <span>Anında başlayın</span>
            </div>
            <div class="cta-feature">
                <RadzenIcon Icon="cancel" Style="font-size: 20px; color: #3b82f6;" />
                <span>İptal ücretsiz</span>
            </div>
        </div>
    </div>
    <div class="cta-decoration">
        <div class="cta-shape cta-shape-1"></div>
        <div class="cta-shape cta-shape-2"></div>
        <div class="cta-shape cta-shape-3"></div>
    </div>
</div>

<style>
    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .rz-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
</style>

@code {
    private List<CategoryDto> categories = new();
    private int hoveredIndex = -1;

    protected override async Task OnInitializedAsync()
    {
        await LoadCategories();
    }

    private async Task LoadCategories()
    {
        var response = await CategoryApiService.GetAllCategoriesAsync();
        if (response.Success && response.Data != null)
        {
            categories = response.Data;
        }
    }

    private void HandleHover(MouseEventArgs args, int index)
    {
        hoveredIndex = index;
        StateHasChanged();
    }
}
