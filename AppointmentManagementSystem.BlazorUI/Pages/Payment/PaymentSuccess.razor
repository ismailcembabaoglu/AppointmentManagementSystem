@page "/payment/success"
@using Blazored.LocalStorage
@inject NavigationManager NavigationManager
@inject ILocalStorageService LocalStorage

<PageTitle>Ã–deme BaÅŸarÄ±lÄ±</PageTitle>

<div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <RadzenCard Style="max-width: 600px; padding: 48px; text-align: center;">
        <div style="margin-bottom: 24px;">
            <div style="width: 80px; height: 80px; margin: 0 auto; background: #4caf50; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <RadzenIcon Icon="check" Style="font-size: 48px; color: white;" />
            </div>
        </div>

        <RadzenText TextStyle="TextStyle.H4" Style="color: #4caf50; margin-bottom: 16px;">
            ğŸ‰ Ã–deme BaÅŸarÄ±lÄ±!
        </RadzenText>

        <RadzenText TextStyle="TextStyle.Body1" Style="margin-bottom: 24px; color: #666;">
            Tebrikler! Ä°lk abonelik Ã¶demeniz (700 TL) baÅŸarÄ±yla alÄ±ndÄ±. 
            HesabÄ±nÄ±z aktifleÅŸtirildi ve hemen kullanmaya baÅŸlayabilirsiniz.
        </RadzenText>

        <RadzenAlert AlertStyle="AlertStyle.Success" Variant="Variant.Flat" Style="margin-bottom: 24px;">
            <RadzenText TextStyle="TextStyle.Body2">
                <strong>Ã–nemli:</strong> Kart bilgileriniz gÃ¼venli bir ÅŸekilde kaydedildi. 
                Bir sonraki Ã¶deme tarihiniz: <strong>@NextBillingDate</strong>
            </RadzenText>
        </RadzenAlert>

        <RadzenText TextStyle="TextStyle.Body2" Style="color: #888; margin-bottom: 32px;">
            AylÄ±k 700 TL abonelik Ã¼creti otomatik olarak Ã§ekilecektir.
            Ä°stediÄŸiniz zaman aboneliÄŸinizi iptal edebilirsiniz.
        </RadzenText>

        <RadzenButton Text="GiriÅŸ Yap ve BaÅŸla" 
                      Click="@NavigateToLogin" 
                      ButtonStyle="ButtonStyle.Success" 
                      Size="ButtonSize.Large"
                      Style="width: 100%;" />
    </RadzenCard>
</div>

@code {
    private string NextBillingDate => DateTime.Now.AddDays(30).ToString("dd MMMM yyyy", new System.Globalization.CultureInfo("tr-TR"));

    protected override async Task OnInitializedAsync()
    {
        // LocalStorage'Ä± temizle - kayÄ±t tamamlandÄ±
        await LocalStorage.RemoveItemAsync("registrationBusinessId");
    }

    private void NavigateToLogin()
    {
        NavigationManager.NavigateTo("/login");
    }
}
